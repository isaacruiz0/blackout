<nav
    class="nav z-10 text-white sticky top-0 w-full flex items-center px-10 py-5 justify-between align-center bg-black/10 backdrop-blur-md border border-s-white"
>
    <h1 class="cursor-pointer sm:select-none">
        <a class="text-xl font-extrabold h-fit" href="/">BLACKOUT</a>
    </h1>

    <ul
        class="desktop-links hidden gap-5 h-full items-center sm:flex sm:flex-row"
    >
        <li
            class="h-full cursor-pointer font-medium hover:bg-white hover:text-black transition duration-100 ease-in"
        >
            <a class="h-full flex items-center px-2" href="/">Home</a>
        </li>
        <li
            class="h-full cursor-pointer font-medium hover:bg-white hover:text-black transition duration-100 ease-in"
        >
            <a class="h-full flex items-center px-2" href="/quote">Quote</a>
        </li>
        <li
            class="h-full cursor-pointer font-medium hover:bg-white hover:text-black transition duration-100 ease-in"
        >
            <a class="h-full flex items-center px-2" href="/#about">About</a>
        </li>
        <li
            class="h-full cursor-pointer font-medium hover:bg-white hover:text-black transition duration-100 ease-in"
        >
            <a class="h-full flex items-center px-2" href="/careers">Careers</a>
        </li>
    </ul>

    <i class="mobile-menu-icon fa-solid fa-bars text-xl sm:hidden!"></i>
    <ul
        class="mobile-links flex flex-col items-start absolute top-0 right-[-91%] w-[90%] bg-black border-t border-b border-l border-white h-screen ease-in duration-200 sm:hidden"
    >
        <li
            class="w-full px-10 py-5 flex items-center justify-between border-b border-white select-none font-medium"
        >
            <h1 class="cursor-pointer sm:select-none">
                <a class="text-xl font-extrabold h-fit" href="/">BLACKOUT</a>
            </h1>
            <i
                id="mobile-menu-close"
                class="fa-solid fa-xmark text-xl font-extrabold"
            ></i>
        </li>

        <li class="w-full">
            <a
                class="text-xl w-full px-10 py-5 flex items-center cursor-pointer font-medium active:bg-white active:text-black transition duration-200 ease-in"
                href="/"
                >Home</a
            >
        </li>
        <li class="w-full">
            <a
                class="text-xl w-full px-10 py-5 flex items-center cursor-pointer font-medium active:bg-white active:text-black transition duration-200 ease-in"
                href="/quote"
                >Quote</a
            >
        </li>
        <li class="w-full">
            <a
                class="text-xl w-full px-10 py-5 flex items-center cursor-pointer font-medium active:bg-white active:text-black transition duration-200 ease-in"
                href="/#about"
                >About</a
            >
        </li>
        <li class="w-full">
            <a
                class="text-xl w-full px-10 py-5 flex items-center cursor-pointer font-medium active:bg-white active:text-black transition duration-200 ease-in"
                href="/careers"
                >Careers</a
            >
        </li>
    </ul>
</nav>

<script defer>
    window.navScript = () => {
        const openMenuMobile = () => {
            const links = document.querySelector(".nav .mobile-links");
            links.classList.remove("right-[-91%]");
            links.classList.add("right-[-1%]");
        };
        const closeMenuMobile = () => {
            const links = document.querySelector(".nav .mobile-links");
            links.classList.remove("right-[-1%]");
            links.classList.add("right-[-91%]");
        };
        const closeMenuOnOutsideTouch = () => {
            // Makes sure there is only one true ref to this func otherwise we'd be making new func refs every time on the same property
            if (!window.handleOutsideTouch) {
                // Declaring this function globablly to ensure that it is the same reference on clean up
                window.handleOutsideTouch = (e) => {
                    const icon = document.querySelector(
                        "nav .mobile-menu-icon",
                    );
                    if (e.target === icon) return;

                    const mobileLinks =
                        document.querySelector("nav .mobile-links");
                    if (!mobileLinks.contains(e.target)) {
                        closeMenuMobile();
                    }
                };
            }

            // Make sure we don't add duplicate listeners to the document since that element persists across page navigations
            document.removeEventListener("click", window.handleOutsideTouch);
            document.addEventListener("click", window.handleOutsideTouch);
        };
        const openNavFromIcon = () => {
            const icon = document.querySelector("nav .mobile-menu-icon");
            icon.addEventListener("click", openMenuMobile);
        };
        const closeMenuXCross = () => {
            const icon = document.getElementById("mobile-menu-close");
            icon.addEventListener("click", closeMenuMobile);
        };

        // Event Listeners
        closeMenuOnOutsideTouch();
        openNavFromIcon();
        closeMenuXCross();
    };
    window.navScript();
    // Ensures this script
    delete window.navScript;
</script>
